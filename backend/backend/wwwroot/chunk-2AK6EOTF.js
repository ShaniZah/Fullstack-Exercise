import{a as D,b as H}from"./chunk-3NDYCDXN.js";import{k as V,l as O,m as T}from"./chunk-NO66PUKX.js";import{C as k,D as R}from"./chunk-JVMS6NBD.js";import{Ea as a,Ja as M,Pa as S,T as F,Ta as g,Y as v,Za as C,_b as w,ac as E,cb as c,da as p,ea as s,fb as n,gb as r,gc as U,hb as b,kc as y,lb as I,nb as d,ob as _,xb as P,yb as l,zb as h}from"./chunk-M4PHA4DX.js";var m=class e{constructor(t){this.http=t}uploadFile(t){let i=new FormData;return i.append("file",t),this.http.post(y.uploadFile,i)}static \u0275fac=function(i){return new(i||e)(v(U))};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})};function z(e,t){if(e&1&&(n(0,"p"),l(1," Selected: "),n(2,"strong"),l(3),r()()),e&2){let i=_();a(3),h(i.selectedFile.name)}}function A(e,t){e&1&&b(0,"mat-progress-bar",7)}function L(e,t){e&1&&(n(0,"p",8),l(1,"Upload complete!"),r())}function W(e,t){if(e&1&&(n(0,"p",9),l(1),r()),e&2){let i=_();a(),h(i.error)}}var j=class e{constructor(t){this.filesService=t}selectedFile=null;uploadInProgress=!1;uploadResult=null;error="";onFileSelected(t){let i=t.target;if(!i.files?.length)return;let o=i.files[0];if(!o.name.endsWith(".csv")){this.error="Only CSV files are allowed.",this.selectedFile=null;return}this.error="",this.selectedFile=o,this.uploadResult=null}uploadFile(){this.selectedFile&&(this.uploadInProgress=!0,this.uploadResult=null,this.error="",this.filesService.uploadFile(this.selectedFile).subscribe({next:t=>{this.uploadResult=t,this.uploadInProgress=!1},error:t=>{this.error="Upload failed: "+t.message,this.uploadInProgress=!1}}))}static \u0275fac=function(i){return new(i||e)(M(m))};static \u0275cmp=S({type:e,selectors:[["app-upload"]],decls:15,vars:5,consts:[["fileInput",""],[1,"upload-card"],["type","file","accept",".CSV","hidden","",3,"change"],["mat-raised-button","","color","primary",3,"click"],[1,"hint"],[4,"ngIf"],["mat-raised-button","","color","accent",3,"click","disabled"],["mode","indeterminate","color","accent"],[1,"statusMessage"],[1,"error"]],template:function(i,o){if(i&1){let u=I();n(0,"mat-card",1)(1,"h2"),l(2,"Upload CSV File"),r(),n(3,"input",2,0),d("change",function(f){return p(u),s(o.onFileSelected(f))}),r(),n(5,"button",3),d("click",function(){p(u);let f=P(4);return s(f.click())}),l(6," Choose File "),r(),n(7,"p",4),l(8,"* Only CSV files are supported."),r(),g(9,z,4,1,"p",5),n(10,"button",6),d("click",function(){return p(u),s(o.uploadFile())}),l(11," Upload "),r(),g(12,A,1,0,"mat-progress-bar",7)(13,L,2,0,"p",8)(14,W,2,1,"p",9),r()}i&2&&(a(9),C("ngIf",o.selectedFile),a(),C("disabled",!o.selectedFile),a(2),c(o.uploadInProgress?12:-1),a(),c(o.uploadResult?13:-1),a(),c(o.error?14:-1))},dependencies:[E,w,V,H,D,R,k,T,O],styles:[".upload-card[_ngcontent-%COMP%]{border-radius:16px;padding:24px;margin:40px auto;max-width:500px;box-shadow:0 4px 16px #0000001a}.upload-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:30px}.upload-card[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin-top:8px}.upload-card[_ngcontent-%COMP%]   .statusMessage[_ngcontent-%COMP%]{text-align:center}"]})};export{j as UploadComponent};
