import{a as te,b as re,c as ie,d as ne,e as ae,f as P,g as oe}from"./chunk-5DIXNHU2.js";import"./chunk-VKM7CXHH.js";import{D as ee}from"./chunk-JVMS6NBD.js";import{$a as $,$b as Z,Ab as f,Bb as y,Ea as s,Hb as K,Ja as z,Ob as k,Pa as p,T as H,Ta as _,W as N,Y as W,Ya as u,Z as h,Za as x,_a as b,ab as L,ac as E,cb as g,da as v,db as U,ea as C,eb as F,fa as R,fb as o,ga as B,gb as a,gc as J,hb as d,kb as w,kc as X,lb as M,nb as S,ob as m,qa as V,sb as G,tb as Q,ub as Y,xb as q,ya as j,yb as c}from"./chunk-M4PHA4DX.js";var me=["determinateSpinner"];function de(t,n){if(t&1&&(R(),o(0,"svg",11),d(1,"circle",12),a()),t&2){let e=m();u("viewBox",e._viewBox()),s(),b("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),u("r",e._circleRadius())}}var pe=new N("mat-progress-spinner-default-options",{providedIn:"root",factory:_e});function _e(){return{diameter:se}}var se=100,ue=10,ge=(()=>{class t{_elementRef=h(V);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=h(j,{optional:!0}),r=h(pe);this._noopAnimations=e==="NoopAnimations"&&!!r&&!r._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=se;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-ue)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=p({type:t,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,i){if(r&1&&G(me,5),r&2){let l;Q(l=Y())&&(i._determinateCircle=l.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(r,i){r&2&&(u("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",i.mode==="determinate"?i.value:null)("mode",i.mode),L("mat-"+i.color),b("width",i.diameter,"px")("height",i.diameter,"px")("--mdc-circular-progress-size",i.diameter+"px")("--mdc-circular-progress-active-indicator-width",i.diameter+"px"),$("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate",i.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",k],diameter:[2,"diameter","diameter",k],strokeWidth:[2,"strokeWidth","strokeWidth",k]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,i){if(r&1&&(_(0,de,2,8,"ng-template",null,0,K),o(2,"div",2,1),R(),o(4,"svg",3),d(5,"circle",4),a()(),B(),o(6,"div",5)(7,"div",6)(8,"div",7),w(9,8),a(),o(10,"div",9),w(11,8),a(),o(12,"div",10),w(13,8),a()()()),r&2){let l=q(1);s(4),u("viewBox",i._viewBox()),s(),b("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),u("r",i._circleRadius()),s(4),x("ngTemplateOutlet",l),s(2),x("ngTemplateOutlet",l),s(2),x("ngTemplateOutlet",l)}},dependencies:[Z],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return t})(),ce=ge;var O=class t{constructor(n){this.http=n}getUsers(){return this.http.get(X.getData)}static \u0275fac=function(e){return new(e||t)(W(J))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var ve=(t,n)=>n.id,Ce=(t,n)=>n.minute;function xe(t,n){if(t&1&&(o(0,"li"),c(1),a()),t&2){let e=m().$implicit;s(),y("Minute ",e.minute," - ",e.state,"")}}function be(t,n){if(t&1){let e=M();o(0,"div",7),S("click",function(){v(e);let i=m(5);return C(i.showMore=!i.showMore)}),c(1,"show more..."),a()}}function we(t,n){if(t&1){let e=M();o(0,"div",8),S("click",function(){v(e);let i=m(5);return C(i.showMore=!i.showMore)}),c(1,"show less..."),a()}}function Me(t,n){if(t&1&&_(0,xe,2,2,"li")(1,be,2,0,"div",5)(2,we,2,0,"div",6),t&2){let e=n.$index,r=m().$implicit,i=m(3);g(e<10||e>10&&i.showMore?0:-1),s(),g(e===10&&!i.showMore?1:-1),s(),g(e>10&&e+1===(r.heartRateStatuses==null?null:r.heartRateStatuses.length)&&i.showMore?2:-1)}}function Se(t,n){if(t&1){let e=M();o(0,"mat-expansion-panel",2),S("closed",function(){v(e);let i=m(3);return C(i.showMore=!1)}),o(1,"mat-expansion-panel-header")(2,"mat-panel-title",3),c(3),a(),o(4,"mat-panel-description"),c(5),a()(),o(6,"div")(7,"p")(8,"b",4),c(9,"Height:"),a(),c(10),a(),o(11,"p")(12,"b",4),c(13,"Weight:"),a(),c(14),a(),o(15,"p")(16,"b",4),c(17,"BMI:"),a(),c(18),a(),o(19,"p")(20,"b",4),c(21,"Heart Rate Info:"),a()(),o(22,"ul"),U(23,Me,3,3,null,null,Ce),a(),o(25,"p")(26,"b",4),c(27,"Average Heart Rate:"),a(),c(28),a()()()}if(t&2){let e=n.$implicit;s(3),y(" ",e.firstName," ",e.lastName," "),s(2),y(" ID: ",e.id," | Age: ",e.age," "),s(5),f(" ",e.height," cm"),s(4),f(" ",e.weight," kg"),s(4),f(" ",e.bmi,""),s(5),F(e.heartRateStatuses),s(5),f(" ",e.avgHeartRate," ")}}function ye(t,n){if(t&1&&(o(0,"mat-accordion"),U(1,Se,29,8,"mat-expansion-panel",null,ve),a()),t&2){let e=m(2);s(),F(e.users)}}function ke(t,n){t&1&&(o(0,"div",1),d(1,"mat-spinner",9),a())}function Ee(t,n){if(t&1&&_(0,ye,3,0,"mat-accordion")(1,ke,2,0,"div",1),t&2){let e=m();g(e.users.length?0:1)}}function Pe(t,n){t&1&&(o(0,"div",0)(1,"h3",10),c(2,"Page couldn't not be loaded"),a(),o(3,"div"),c(4,"Please try again later"),a()())}var D=class t{constructor(n){this.userService=n}users=[];error=!1;showMore=!1;ngOnInit(){this.userService.getUsers().subscribe({next:n=>{this.users=n.map(e=>{e.bmi=this.calculateBMI(e.height,e.weight);let{avg:r,states:i}=this.analyzeHeartRate(e.heartRate);return e.avgHeartRate=r,e.heartRateStatuses=this.extractFirstMinuteOfStates(i),e})},error:()=>{this.error=!0}})}calculateBMI(n,e){let r=n/100;return+(e/(r*r)).toFixed(2)}analyzeHeartRate(n){let e=n.split(";").map(Number),r=[];return e.forEach((l,T)=>{let I="awake";l<70?I="sleeping":l>=90&&(I="workout"),r.push({minute:T+1,state:I})}),{avg:+(e.reduce((l,T)=>l+T,0)/e.length).toFixed(2),states:r}}extractFirstMinuteOfStates(n){let e=[],r=null;for(let i of n)i.state!==r&&(e.push(i),r=i.state);return e}static \u0275fac=function(e){return new(e||t)(z(O))};static \u0275cmp=p({type:t,selectors:[["app-user-data"]],decls:2,vars:1,consts:[[1,"error-container"],[1,"loader-container"],[3,"closed"],[1,"panel-header"],[1,"user-data-field"],[1,"show-more"],[1,"show-less"],[1,"show-more",3,"click"],[1,"show-less",3,"click"],["color","primary"],[1,"error-text"]],template:function(e,r){e&1&&_(0,Ee,2,1)(1,Pe,5,0,"div",0),e&2&&g(r.error?1:0)},dependencies:[E,P,ae,te,re,ne,ie,ce],styles:[".loader-container[_ngcontent-%COMP%]{width:100%;height:100%;justify-items:center}.error-container[_ngcontent-%COMP%]{justify-items:center;margin-top:50px}.error-text[_ngcontent-%COMP%]{color:#d32a46}.user-data-field[_ngcontent-%COMP%]{color:#383838}.panel-header[_ngcontent-%COMP%]{color:#2b2b2b}.heart-rate-statuses-container[_ngcontent-%COMP%]{height:100px;scroll-behavior:auto}.show-more[_ngcontent-%COMP%], .show-less[_ngcontent-%COMP%]{color:#45bbff;cursor:pointer}.show-more[_ngcontent-%COMP%]:hover, .show-less[_ngcontent-%COMP%]:hover{color:#1c9de7}"]})};var le=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=p({type:t,selectors:[["app-dashboard"]],decls:5,vars:0,consts:[[1,"dashboard-container"],[1,"section-card"],[1,"dashboard-header"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),c(3,"User Information"),a(),d(4,"app-user-data"),a()())},dependencies:[E,oe,ee,P,D],styles:["mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.report-upload-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;justify-content:space-between;gap:2rem;margin-top:2rem;flex-wrap:wrap}.report-upload-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1 1 48%;max-width:48%;box-sizing:border-box}.dashboard-container[_ngcontent-%COMP%]{padding:20px}.dashboard-header[_ngcontent-%COMP%]{color:#2b2b2b}"]})};export{le as DashboardComponent};
